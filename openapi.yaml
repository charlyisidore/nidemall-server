openapi: 3.1.0
info:
  title: nidemall wx - OpenAPI 3.1
  description: |-
    `nidemall` server API based on the OpenAPI 3.1 specification.
  version: '1.0'
  contact: {}
externalDocs:
  description: GitHub repository
  url: https://github.com/charlyisidore/nidemall-server
servers:
  - url: http://localhost:8080/wx
  - url: http://localhost:8360/wx
tags:
  - name: home
  - name: catalog
  - name: auth
  - name: goods
  - name: brand
  - name: cart
  - name: collect
  - name: comment
  - name: topic
  - name: search
  - name: address
  - name: express
  - name: region
  - name: order
  - name: aftersale
  - name: feedback
  - name: footprint
  - name: groupon
  - name: coupon
  - name: storage
  - name: user
  - name: issue
paths:
  /home/index:
    get:
      tags:
        - home
      summary: Homepage index
      description: Homepage index
      operationId: wxHomeIndex
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          newGoodsList:
                            type: array
                            items:
                              $ref: '#/components/schemas/Goods'
                          couponList:
                            type: array
                            items:
                              $ref: '#/components/schemas/Coupon'
                          channel:
                            type: array
                            items:
                              $ref: '#/components/schemas/CategoryChannel'
                          grouponList:
                            type: array
                            items:
                              $ref: '#/components/schemas/Groupon'
                          banner:
                            type: array
                            items:
                              $ref: '#/components/schemas/Ad'
                          brandList:
                            type: array
                            items:
                              $ref: '#/components/schemas/Brand'
                          hotGoodsList:
                            type: array
                            items:
                              $ref: '#/components/schemas/Goods'
                          topicList:
                            type: array
                            items:
                              $ref: '#/components/schemas/Topic'
                          floorGoodsList:
                            type: array
                            items:
                              type: object
                              properties:
                                name:
                                  type: string
                                goodsList:
                                  type: array
                                  items:
                                    $ref: '#/components/schemas/Goods'
                                id:
                                  type: integer
  /home/about:
    get:
      tags:
        - home
      summary: Homepage about
      description: Homepage about
      operationId: wxHomeAbout
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          qq:
                            type: string
                          address:
                            type: string
                          phone:
                            type: string
                          latitude:
                            type: string
                          name:
                            type: string
                          longitude:
                            type: string
  /catalog/index:
    get:
      tags:
        - catalog
      summary: Catalog index
      description: Catalog index
      operationId: wxCatalogIndex
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          currentCategory:
                            $ref: '#/components/schemas/Category'
                          categoryList:
                            type: array
                            items:
                              $ref: '#/components/schemas/Category'
                          currentSubCategory:
                            type: array
                            items:
                              $ref: '#/components/schemas/Category'
  /catalog/current:
    get:
      tags:
        - catalog
      summary: Catalog current
      description: Catalog current
      operationId: wxCatalogCurrent
      parameters:
        - name: id
          in: query
          description: Category ID
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          currentCategory:
                            $ref: '#/components/schemas/Category'
                          currentSubCategory:
                            type: array
                            items:
                              $ref: '#/components/schemas/Category'
  /goods/count:
    get:
      tags:
        - goods
      summary: Goods count
      description: Goods count
      operationId: wxGoodsCount
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: integer
  /goods/list:
    get:
      tags:
        - goods
      summary: Goods list
      description: Goods list
      operationId: wxGoodsList
      parameters:
        - name: categoryId
          in: query
          description: Category ID
          required: false
          schema:
            type: integer
        - name: brandId
          in: query
          description: Brand ID
          required: false
          schema:
            type: integer
        - name: keyword
          in: query
          description: Search by keywords
          required: false
          schema:
            type: string
        - name: isNew
          in: query
          description: Only new goods
          required: false
          schema:
            type: boolean
        - name: isHot
          in: query
          description: Only hot goods
          required: false
          schema:
            type: boolean
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/order'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        allOf:
                          - $ref: '#/components/schemas/List'
                          - type: object
                            properties:
                              list:
                                type: array
                                items:
                                  $ref: '#/components/schemas/Goods'
  /goods/category:
    get:
      tags:
        - goods
      summary: Goods category
      description: Goods category
      operationId: wxGoodsCategory
      parameters:
        - name: id
          in: query
          description: Category ID
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          currentCategory:
                            $ref: '#/components/schemas/Category'
                          brotherCategory:
                            type: array
                            items:
                              $ref: '#/components/schemas/Category'
                          parentCategory:
                            $ref: '#/components/schemas/Category'
  /goods/detail:
    get:
      tags:
        - goods
      summary: Goods detail
      description: Goods detail
      operationId: wxGoodsDetail
      parameters:
        - name: id
          in: query
          description: Goods ID
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          specificationList:
                            type: array
                            items:
                              type: object
                              properties:
                                name:
                                  type: string
                                valueList:
                                  type: array
                                  items:
                                    $ref: '#/components/schemas/GoodsSpecification'
                          groupon:
                            type: array
                            items:
                              $ref: '#/components/schemas/GrouponRules'
                          issue:
                            type: array
                            items:
                              $ref: '#/components/schemas/Issue'
                          userHasCollect:
                            type: integer
                          shareImage:
                            type: string
                          comment:
                            type: object
                            properties:
                              data:
                                type: array
                                items:
                                  $ref: '#/components/schemas/Comment'
                              count:
                                type: integer
                          share:
                            type: boolean
                          attribute:
                            type: array
                            items:
                              $ref: '#/components/schemas/GoodsAttribute'
                          brand:
                            $ref: '#/components/schemas/Brand'
                          productList:
                            type: array
                            items:
                              $ref: '#/components/schemas/GoodsProduct'
                          info:
                            $ref: '#/components/schemas/GoodsInfo'
components:
  schemas:
    ApiResponse:
      type: object
      properties:
        errno:
          type: integer
          description: Error code
        errmsg:
          type: string
          description: Error message
        data:
          description: Output data
    List:
      type: object
      properties:
        total:
          type: integer
        pages:
          type: integer
        limit:
          type: integer
        page:
          type: integer
        list:
          type: array
    DateTime:
      type: string
      format: date-time
    Ad:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        link:
          type: string
        url:
          type: string
        position:
          type: integer
        content:
          type: string
        enabled:
          type: boolean
        addTime:
          $ref: '#/components/schemas/DateTime'
        updateTime:
          $ref: '#/components/schemas/DateTime'
        deleted:
          type: boolean
    Brand:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        desc:
          type: string
        picUrl:
          type: string
        floorPrice:
          type: number
    Comment:
      type: object
      properties:
        addTime:
          $ref: '#/components/schemas/DateTime'
        picList:
          type: array
          items:
            type: string
        adminContent:
          type: string
        nickname:
          type: string
        id:
          type: integer
        avatar:
          type: string
        content:
          type: string
    Category:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        keywords:
          type: string
        desc:
          type: string
        pid:
          type: integer
        iconUrl:
          type: string
        picUrl:
          type: string
        level:
          type: string
        sortOrder:
          type: integer
        addTime:
          $ref: '#/components/schemas/DateTime'
        updateTime:
          $ref: '#/components/schemas/DateTime'
        deleted:
          type: boolean
    CategoryChannel:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        iconUrl:
          type: string
    Coupon:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        desc:
          type: string
        tag:
          type: string
        discount:
          type: number
        min:
          type: number
        days:
          type: integer
    Issue:
      type: object
      properties:
        id:
          type: integer
        question:
          type: string
        answer:
          type: string
        addTime:
          $ref: '#/components/schemas/DateTime'
        updateTime:
          $ref: '#/components/schemas/DateTime'
        deleted:
          type: boolean
    Goods:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        brief:
          type: string
        picUrl:
          type: string
        isNew:
          type: boolean
        isHot:
          type: boolean
        counterPrice:
          type: number
        retailPrice:
          type: number
    GoodsInfo:
      type: object
      properties:
        id:
          type: integer
        goodsSn:
          type: string
        name:
          type: string
        categoryId:
          type: integer
        brandId:
          type: integer
        gallery:
          type: array
          items:
            type: string
        keywords:
          type: string
        brief:
          type: string
        isOnSale:
          type: boolean
        sortOrder:
          type: integer
        picUrl:
          type: string
        shareUrl:
          type: string
        isNew:
          type: boolean
        isHot:
          type: boolean
        unit:
          type: string
        counterPrice:
          type: number
        retailPrice:
          type: number
        addTime:
          $ref: '#/components/schemas/DateTime'
        updateTime:
          $ref: '#/components/schemas/DateTime'
        deleted:
          type: boolean
        detail:
          type: string
    GoodsAttribute:
      type: object
      properties:
        id:
          type: integer
        goodsId:
          type: integer
        attribute:
          type: string
        value:
          type: string
        addTime:
          $ref: '#/components/schemas/DateTime'
        updateTime:
          $ref: '#/components/schemas/DateTime'
        deleted:
          type: boolean
    GoodsProduct:
      type: object
      properties:
        id:
          type: integer
        goodsId:
          type: integer
        specifications:
          type: array
          items:
            type: string
        price:
          type: number
        number:
          type: number
        url:
          type: string
        addTime:
          $ref: '#/components/schemas/DateTime'
        updateTime:
          $ref: '#/components/schemas/DateTime'
        deleted:
          type: boolean
    GoodsSpecification:
      type: object
      properties:
        id:
          type: integer
        goodsId:
          type: integer
        specification:
          type: string
        value:
          type: string
        picUrl:
          value: string
        addTime:
          $ref: '#/components/schemas/DateTime'
        updateTime:
          $ref: '#/components/schemas/DateTime'
        deleted:
          type: boolean
    Groupon:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        brief:
          type: string
        picUrl:
          type: string
        counterPrice:
          type: number
        retailPrice:
          type: number
        grouponPrice:
          type: number
        grouponDiscount:
          type: number
        grouponMember:
          type: number
        expireTime:
          type: string
          format: date-time
    GrouponRules:
      type: object
      properties:
        id:
          type: integer
        goodsId:
          type: integer
        goodsName:
          type: string
        picUrl:
          type: string
        discount:
          type: number
        discountMember:
          type: integer
        expireTime:
          $ref: '#/components/schemas/DateTime'
        status:
          type: string
        addTime:
          $ref: '#/components/schemas/DateTime'
        updateTime:
          $ref: '#/components/schemas/DateTime'
        deleted:
          type: boolean
    Topic:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        subtitle:
          type: string
        price:
          type: number
        readCount:
          type: string
        picUrl:
          type: string
  parameters:
    page:
      name: page
      in: query
      description: Page number
      required: false
      schema:
        type: integer
        default: 1
    limit:
      name: limit
      in: query
      description: Items per page
      required: false
      schema:
        type: integer
        default: 10
    sort:
      name: sort
      in: query
      description: Sort field
      required: false
      schema:
        type: string
        default: 'add_time'
    order:
      name: order
      in: query
      description: Sort direction
      required: false
      schema:
        type: string
        default: 'desc'
  securitySchemes:
    ApiKey:
      type: apiKey
      in: header
      name: 'X-Litemall-Token'
